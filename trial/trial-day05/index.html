<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Daily Cryptojoke</title>

<style>
  :root {
    --teal: #008080;
    --teal-dark:#006a6a;
    --gold: #d8c178;
    --light-bg: #f5f6f7;
    --panel:#ffffff;
    --muted:#6b6b6b;
    --line:#b9b9b9;
  }

  body {
    margin:0;
    background:var(--light-bg);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:#1e1e1e;
  }

  header {
    background:var(--teal);
    color:#fff;
    padding:14px 8px;
    text-align:center;
    border-bottom:3px solid var(--teal-dark);
  }
  header h1 {
    margin:0;
    font-size:22px;
    letter-spacing:.4px;
  }
  header h2 {
    margin:4px 0 0;
    font-size:15px;
    font-weight:600;
  }

  .wrap {
    max-width:580px;
    margin:10px auto;
    padding:10px;
    box-sizing:border-box;
  }

  .puzzle-container {
    width:100%;
    background:var(--panel);
    border:1px solid #ddd;
    border-radius:16px;
    padding:1em 0.8em;
    box-shadow:0 3px 10px rgba(0,0,0,0.05);
    box-sizing:border-box;
  }

  h3 {
    text-align:center;
    color:var(--teal);
    margin:0 0 6px;
    font-size:clamp(1.1em,4vw,1.4em);
  }

  .instructions {
    text-align:center;
    font-style:italic;
    color:var(--muted);
    margin-bottom:12px;
    font-size:clamp(0.85em,3vw,0.95em);
  }

  #cryptogram {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px 6px;
    font-family:monospace;
    font-size:clamp(15px,3.6vw,18px);
    line-height:1.5;
    margin-bottom:14px;
    padding:0 6px;
    max-width:100%;
    overflow-x:auto;   /* allow safe horizontal scroll if required */
  }

  .word {
    display:inline-flex;
    align-items:flex-end;
    margin-right:8px;
    white-space:nowrap;
    max-width:100%;
  }

  .letterBox {
    display:flex;
    flex-direction:column;
    align-items:center;
  }

  .cipher {
    font-weight:700;
    margin-bottom:4px;
    color:var(--teal);
    font-size:clamp(14px,3.2vw,17px);
  }

  input[type=text] {
    width:clamp(30px,7vw,40px);
    height:clamp(30px,7vw,40px);
    font-size:clamp(15px,3.5vw,18px);
    text-align:center;
    text-transform:uppercase;
    border:1.3px solid #ccc;
    border-radius:6px;
    box-sizing:border-box;
    background:#fff;
    flex-shrink:0;
  }

  input[type=text]:focus {
    outline:none;
    border-color:var(--teal);
    background:#e8f8fb;
  }

  .punct {
    margin-left:6px;
    font-weight:700;
    color:var(--teal);
  }

  .button-row {
    text-align:center;
  }

  .btn {
    padding:9px 14px;
    border-radius:10px;
    background:#fff;
    color:var(--teal);
    border:1px solid var(--teal);
    cursor:pointer;
    font-size:14px;
    font-weight:700;
  }

  .btn:active {
    background:var(--gold);
    color:#000;
    transform:scale(.97);
  }
</style>
</head>

<body>

<header>
  <h1>Daily Cryptojoke</h1>
  
</header>

<div class="wrap">
  <div class="puzzle-container">
    <h3>Crack todayâ€™s joke!</h3>
    <div class="instructions">Type your guesses below each letter. Progress saves automatically.</div>

    <div id="cryptogram"></div>

    <div class="button-row">
      <button class="btn" id="clearBtn">Clear My Answers</button>
    </div>
  </div>
</div>

<script>
(function(){

  // CHANGE THIS PER PUZZLE
  const phrase = "MZR AKELFMRJ QRLM NJRRTYIC URAXFDR YM ZXW VRNM YMD PYIWKPD KLRI.";


  const STORAGE_KEY = "cryptojoke_trial_05";
  const CLEAR_FLAG = "cryptojoke_trial_05_cleared";

  const container = document.getElementById("cryptogram");
  const clearBtn = document.getElementById("clearBtn");

  function setCookie(name,value,days){
    const d=new Date();
    d.setTime(d.getTime()+days*86400000);
    document.cookie=name+"="+encodeURIComponent(value)+";expires="+d.toUTCString()+";path=/";
  }

  function getCookie(name){
    const m=document.cookie.match(new RegExp('(^|; )'+name+'=([^;]*)'));
    return m?decodeURIComponent(m[2]):"";
  }

  const isCleared=getCookie(CLEAR_FLAG)==="true";
  let saved={};
  try {
    if(!isCleared){
      saved=JSON.parse(localStorage.getItem(STORAGE_KEY)||"{}");
    }
  } catch(e){ saved={}; }

  const inputs = [];

  phrase.split(" ").forEach((word,wIndex)=>{
    const wordDiv=document.createElement("div");
    wordDiv.className="word";

    word.split("").forEach((ch,cIndex)=>{
      if(/[A-Z]/.test(ch)){
        const box=document.createElement("div");
        box.className="letterBox";

        const top=document.createElement("div");
        top.className="cipher";
        top.textContent=ch;

        const input=document.createElement("input");
        input.type="text";
        input.maxLength=1;

        const id=wIndex+"-"+cIndex;
        if(saved[id]) input.value=saved[id];

        input.oninput=(e)=>{
          e.target.value=e.target.value.toUpperCase().replace(/[^A-Z]/g,"").slice(0,1);
          if(e.target.value) saved[id]=e.target.value;
          else delete saved[id];
          localStorage.setItem(STORAGE_KEY,JSON.stringify(saved));
          setCookie(CLEAR_FLAG,"false",7);
        };

        box.appendChild(top);
        box.appendChild(input);
        wordDiv.appendChild(box);
        inputs.push(input);
      } else {
        const p=document.createElement("div");
        p.className="punct";
        p.textContent=ch;
        wordDiv.appendChild(p);
      }
    });

    container.appendChild(wordDiv);
  });

  clearBtn.onclick=()=>{
    inputs.forEach(i=>i.value="");
    localStorage.removeItem(STORAGE_KEY);
    setCookie(CLEAR_FLAG,"true",7);
  };

})();
</script>

</body>
</html>
